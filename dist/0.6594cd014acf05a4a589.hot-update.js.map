{"version":3,"sources":["webpack:///./src/DeviceMenu.jsx?42ea"],"names":["DeviceMenu","Component","dataFetcher","urlBase","location","fetch","search","then","response","ok","json","error","Promise","reject","data","constructor","props","context","devices","initialState","records","deviceOptions","state","onAddButton","bind","socket","componentDidMount","on","pathname","mesg","setState","text","loadData","forEach","device","push","_id","device_number","name","catch","err","showError","event","console","log","target","value","render","propTypes","PropTypes","object","isRequired","router","contextTypes"],"mappings":";;;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;AACA;;;;;;AAEe,OAAMA,UAAN,SAAyB,gBAAMC,SAA/B,CAAyC;;AAEtD,UAAOC,WAAP,OAA0C;AAAA,SAArBC,OAAqB,QAArBA,OAAqB;AAAA,SAAZC,QAAY,QAAZA,QAAY;;AACxC,YAAOC,MAAO,GAAEF,WAAW,EAAG,eAAcC,SAASE,MAAO,EAArD,EAAwDC,IAAxD,CAA6DC,YAAY;AAC9E,WAAI,CAACA,SAASC,EAAd,EAAkB,OAAOD,SAASE,IAAT,GAAgBH,IAAhB,CAAqBI,SAASC,QAAQC,MAAR,CAAeF,KAAf,CAA9B,CAAP;AAClB,cAAOH,SAASE,IAAT,GAAgBH,IAAhB,CAAqBO,SAAS,EAAEd,YAAYc,IAAd,EAAT,CAArB,CAAP;AACD,MAHM,CAAP;AAID;;AAEDC,eAAYC,KAAZ,EAAmBC,OAAnB,EAA2B;AACzB,WAAMD,KAAN,EAAaC,OAAb;AACA,WAAMC,UAAUD,QAAQE,YAAR,CAAqBnB,UAArB,GAAkCiB,QAAQE,YAAR,CAAqBnB,UAArB,CAAgCoB,OAAlE,GAA4E,EAA5F;AACA,UAAKC,aAAL,GAAqB,EAArB;AACA,UAAKC,KAAL,GAAa;AACXJ;AADW,MAAb;AAGA,UAAKK,WAAL,GAAmB,KAAKA,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAnB;AACA,UAAKC,MAAL;AACH;AACDC,uBAAoB;AACZ,UAAKD,MAAL,GAAc,uBAAd;AACA,UAAKA,MAAL,CAAYE,EAAZ,CAAe,KAAKX,KAAL,CAAWZ,QAAX,CAAoBwB,QAAnC,EAA8CC,IAAD,IAAU;AAC/C,YAAKC,QAAL,CAAc,EAACC,MAAMF,IAAP,EAAd;AACP,MAFD;AAGH,UAAKG,QAAL;AACF;;AAEDA,cAAW;AACThC,gBAAWE,WAAX,CAAuB,EAAEE,UAAU,KAAKY,KAAL,CAAWZ,QAAvB,EAAvB,EACCG,IADD,CACMO,QAAQ;AACZ,aAAMI,UAAUJ,KAAKd,UAAL,CAAgBoB,OAAhC;AACAF,eAAQe,OAAR,CAAgBC,UAAU;AAC/B,cAAKb,aAAL,CAAmBc,IAAnB,CAAwB;AAAA;AAAA,aAAQ,KAAKD,OAAOE,GAApB,EAAyB,OAAOF,OAAOG,aAAvC;AAAuDH,kBAAOI;AAA9D,UAAxB;AAEM,QAHD;AAIA,YAAKR,QAAL,CAAc,EAAEZ,gBAAF,EAAd;AACD,MARD,EAQGqB,KARH,CAQSC,OAAO;AACd,YAAKC,SAAL,CAAgB,uCAAsCD,GAAI,EAA1D;AACD,MAVD;AAWD;;AAEDjB,eAAYmB,KAAZ,EAAmB;AACnBC,aAAQC,GAAR,CAAY,SAAZ,EAAuB,YAAYF,MAAMG,MAAN,CAAaC,KAAhD;AACC;AACDC,YAAS;AACP,YACH;AAAA;AAAA;AACC;AAAA;AAAA,WAAa,gBAAe,QAA5B,EAAqC,UAAU,KAAKxB,WAApD;AACgB,cAAKF;AADrB;AADD,MADG;AAOD;AApDqD;mBAAnCrB,U;AAsDrBA,YAAWgD,SAAX,GAAuB;AACrB5C,aAAU,gBAAM6C,SAAN,CAAgBC,MAAhB,CAAuBC,UADZ;AAErBC,WAAQ,gBAAMH,SAAN,CAAgBC;AAFH,EAAvB;;AAKAlD,YAAWqD,YAAX,GAA0B;AACxBlC,iBAAc,gBAAM8B,SAAN,CAAgBC;AADN,EAA1B,C","file":"0.6594cd014acf05a4a589.hot-update.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport _ from \"lodash\";\nimport 'isomorphic-fetch';\nimport FormControl from 'react-bootstrap';\nimport SocketIOClient from 'socket.io-client';\n\nexport default class DeviceMenu extends React.Component {\n\n  static dataFetcher({ urlBase, location }) {\n    return fetch(`${urlBase || ''}/api/devices${location.search}`).then(response => {\n      if (!response.ok) return response.json().then(error => Promise.reject(error));\n      return response.json().then(data => ({ DeviceMenu: data }));\n    });\n  }\n\n  constructor(props, context){\n    super(props, context);\n    const devices = context.initialState.DeviceMenu ? context.initialState.DeviceMenu.records : [];\n    this.deviceOptions = [];\n    this.state = {\n      devices,\n    };\n    this.onAddButton = this.onAddButton.bind(this);\n    this.socket;\n}\ncomponentDidMount() {\n        this.socket = SocketIOClient();\n        this.socket.on(this.props.location.pathname, (mesg) => {\n                this.setState({text: mesg});\n        });\n    \tthis.loadData();\n  }\n\n  loadData() {\n    DeviceMenu.dataFetcher({ location: this.props.location })\n    .then(data => {\n      const devices = data.DeviceMenu.records;\n      devices.forEach(device => {\n\tthis.deviceOptions.push(<option key={device._id} value={device.device_number}>{device.name}</option>);\n\n      });\n      this.setState({ devices });\n    }).catch(err => {\n      this.showError(`Error in fetching data from server: ${err}`);\n    });\n  }\n\n  onAddButton(event) {\n\t console.log(\"adding \", \"button \" + event.target.value);\n  }\n  render() {\n    return (\n\t<div>\n\t\t<FormControl componentClass=\"select\" onChange={this.onAddButton}>\n                \t{this.deviceOptions}\n        \t</FormControl>\n\t</div>\n    );\n  }\n}\nDeviceMenu.propTypes = {\n  location: React.PropTypes.object.isRequired,\n  router: React.PropTypes.object,\n};\n\nDeviceMenu.contextTypes = {\n  initialState: React.PropTypes.object,\n}; \n\n\n\n// WEBPACK FOOTER //\n// ./src/DeviceMenu.jsx"],"sourceRoot":""}